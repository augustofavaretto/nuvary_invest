<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Doc 19 - Centraliza√ß√£o de Strings pt-BR | Nuvary Invest</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }

        :root {
            --primary: #8B5CF6;
            --primary-dark: #6D28D9;
            --secondary: #10b981;
            --dark: #0B1F33;
            --gray: #6B7280;
            --light: #F3F4F6;
            --white: #ffffff;
            --code-bg: #1e293b;
            --border: #E5E7EB;
        }

        body {
            font-family: 'Inter', 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #334155;
            background: var(--light);
        }

        .container { max-width: 1000px; margin: 0 auto; padding: 0 20px; }

        header {
            background: linear-gradient(135deg, #4C1D95 0%, #6D28D9 50%, #8B5CF6 100%);
            color: white;
            padding: 50px 0;
            text-align: center;
        }

        .version-badge {
            display: inline-block;
            background: rgba(255,255,255,0.2);
            color: white;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: 600;
            margin-bottom: 15px;
        }

        header h1 { font-size: 2.2rem; margin-bottom: 10px; }
        header p { font-size: 1.1rem; opacity: 0.9; }

        nav {
            background: var(--white);
            padding: 15px 0;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            position: sticky;
            top: 0;
            z-index: 100;
        }

        nav ul {
            list-style: none;
            display: flex;
            gap: 25px;
            justify-content: center;
            flex-wrap: wrap;
        }

        nav a {
            color: var(--gray);
            text-decoration: none;
            font-weight: 500;
            transition: color 0.3s;
        }

        nav a:hover { color: var(--primary); }

        main { padding: 40px 0; }

        section {
            background: var(--white);
            border-radius: 12px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
        }

        h2 {
            color: var(--dark);
            font-size: 1.5rem;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 3px solid var(--primary);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        h3 {
            color: var(--dark);
            font-size: 1.1rem;
            margin: 20px 0 12px;
            font-weight: 600;
        }

        p { color: #475569; margin-bottom: 12px; line-height: 1.7; }

        code {
            background: #F1F5F9;
            color: #4F46E5;
            padding: 2px 7px;
            border-radius: 4px;
            font-family: 'Fira Code', 'Courier New', monospace;
            font-size: 0.88rem;
        }

        pre {
            background: var(--code-bg);
            color: #e2e8f0;
            padding: 20px;
            border-radius: 8px;
            overflow-x: auto;
            margin: 15px 0;
            font-family: 'Fira Code', 'Courier New', monospace;
            font-size: 0.88rem;
            line-height: 1.6;
        }

        pre .comment { color: #64748b; }
        pre .keyword { color: #93c5fd; }
        pre .string { color: #86efac; }
        pre .type { color: #fbbf24; }

        .highlight-box {
            background: linear-gradient(135deg, #F5F3FF 0%, #EDE9FE 100%);
            border-left: 4px solid var(--primary);
            padding: 15px 20px;
            border-radius: 0 8px 8px 0;
            margin: 15px 0;
        }

        .highlight-box strong { color: var(--primary-dark); }

        .success-box {
            background: linear-gradient(135deg, #F0FDF4 0%, #DCFCE7 100%);
            border-left: 4px solid #10B981;
            padding: 15px 20px;
            border-radius: 0 8px 8px 0;
            margin: 15px 0;
        }

        .files-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }

        .file-card {
            background: #F8FAFC;
            border: 1px solid var(--border);
            border-radius: 8px;
            padding: 15px;
        }

        .file-card .file-name {
            font-family: 'Fira Code', monospace;
            font-size: 0.82rem;
            color: var(--primary-dark);
            font-weight: 600;
            margin-bottom: 6px;
            word-break: break-all;
        }

        .file-card .file-desc {
            font-size: 0.88rem;
            color: var(--gray);
        }

        .domain-tag {
            display: inline-block;
            background: var(--primary);
            color: white;
            font-size: 0.72rem;
            padding: 2px 8px;
            border-radius: 10px;
            margin-left: 6px;
            vertical-align: middle;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin: 15px 0;
            font-size: 0.9rem;
        }

        th {
            background: var(--light);
            padding: 10px 15px;
            text-align: left;
            font-weight: 600;
            color: var(--dark);
            border-bottom: 2px solid var(--border);
        }

        td {
            padding: 10px 15px;
            border-bottom: 1px solid var(--border);
            color: #475569;
        }

        td code { font-size: 0.82rem; }

        tr:hover td { background: #FAFAFA; }

        .back-link {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            color: var(--primary);
            text-decoration: none;
            margin-bottom: 20px;
            font-weight: 500;
        }

        .back-link:hover { text-decoration: underline; }

        footer {
            text-align: center;
            padding: 30px 0;
            color: var(--gray);
        }

        footer a { color: var(--primary); text-decoration: none; }
        footer a:hover { text-decoration: underline; }
    </style>
</head>
<body>
    <header>
        <div class="container">
            <span class="version-badge">Fevereiro 2026 ‚Äî v3.3.0</span>
            <h1>Centraliza√ß√£o de Strings pt-BR</h1>
            <p>Padr√£o global UTF-8 com fonte √∫nica de verdade para todo o texto de UI</p>
        </div>
    </header>

    <nav>
        <ul>
            <li><a href="index.html" style="color: #10b981; font-weight: 600;">√çndice</a></li>
            <li><a href="#contexto">Contexto</a></li>
            <li><a href="#arquivos">Arquivos Criados</a></li>
            <li><a href="#strings">strings.ts</a></li>
            <li><a href="#uso">Uso</a></li>
            <li><a href="#refatorados">Refatorados</a></li>
        </ul>
    </nav>

    <main class="container">
        <a href="index.html" class="back-link">‚Üê Voltar para o √≠ndice</a>

        <!-- Contexto -->
        <section id="contexto">
            <h2>üéØ Contexto e Motiva√ß√£o</h2>

            <p>O projeto possu√≠a texto de UI em portugu√™s brasileiro distribu√≠do diretamente em cada componente como strings literais. Isso causou dois problemas recorrentes:</p>

            <div class="highlight-box">
                <strong>Problema 1 ‚Äî Acentos ausentes:</strong> sem um local centralizado e com revis√£o, palavras como <code>questionario</code>, <code>nao</code>, <code>usuario</code> foram escritas sem acento em dezenas de arquivos, exigindo corre√ß√£o manual em cada um.
            </div>

            <div class="highlight-box">
                <strong>Problema 2 ‚Äî Consist√™ncia fr√°gil:</strong> a mesma string como <code>"N√£o foi poss√≠vel"</code> podia aparecer com varia√ß√µes sutis em componentes diferentes, sem garantia de padroniza√ß√£o futura.
            </div>

            <p>A solu√ß√£o implementada na v3.3.0 √© uma <strong>fonte √∫nica de verdade</strong>: o arquivo <code>src/constants/strings.ts</code>, que centraliza todo o texto vis√≠vel ao usu√°rio. Junto a isso, foram criados <code>.editorconfig</code> e <code>.vscode/settings.json</code> para garantir UTF-8 em n√≠vel de editor, cobrindo a raiz do problema.</p>
        </section>

        <!-- Arquivos criados -->
        <section id="arquivos">
            <h2>üìÅ Arquivos Criados</h2>

            <div class="files-grid">
                <div class="file-card">
                    <div class="file-name">.editorconfig</div>
                    <div class="file-desc">Raiz do projeto. For√ßa <code>charset = utf-8</code> e <code>end_of_line = lf</code> em qualquer editor ou IDE (VS Code, IntelliJ, Vim, etc.).</div>
                </div>
                <div class="file-card">
                    <div class="file-name">.vscode/settings.json</div>
                    <div class="file-desc">UTF-8 como padr√£o no VS Code, <code>formatOnSave</code> ativado, ESLint integrado ao salvar.</div>
                </div>
                <div class="file-card">
                    <div class="file-name">frontend/src/constants/strings.ts</div>
                    <div class="file-desc">Arquivo central com todos os textos de UI em pt-BR correto, exportados como objeto <code>STRINGS</code> tipado com <code>as const</code>.</div>
                </div>
            </div>

            <h3>.editorconfig</h3>
            <pre><span class="comment">root = true</span>

<span class="keyword">[*]</span>
charset = utf-8
end_of_line = lf
indent_style = space
indent_size = 2
trim_trailing_whitespace = true
insert_final_newline = true

<span class="keyword">[*.md]</span>
trim_trailing_whitespace = false</pre>

            <h3>.vscode/settings.json</h3>
            <pre>{
  <span class="string">"files.encoding"</span>: <span class="string">"utf8"</span>,
  <span class="string">"files.autoGuessEncoding"</span>: <span class="keyword">false</span>,
  <span class="string">"files.eol"</span>: <span class="string">"\n"</span>,
  <span class="string">"editor.formatOnSave"</span>: <span class="keyword">true</span>,
  <span class="string">"editor.codeActionsOnSave"</span>: {
    <span class="string">"source.fixAll.eslint"</span>: <span class="string">"explicit"</span>
  }
}</pre>
        </section>

        <!-- strings.ts -->
        <section id="strings">
            <h2>üìù Estrutura do strings.ts</h2>

            <p>O objeto <code>STRINGS</code> √© organizado em dom√≠nios que espelham as √°reas funcionais do projeto. Todos os valores s√£o <strong>TypeScript strict</strong> (<code>as const</code>), garantindo autocomplete e detec√ß√£o de erros em tempo de compila√ß√£o.</p>

            <table>
                <thead>
                    <tr>
                        <th>Dom√≠nio</th>
                        <th>Conte√∫do</th>
                        <th>Exemplos de chaves</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><code>STRINGS.errors</code></td>
                        <td>Erros gen√©ricos reutilizados em m√∫ltiplos servi√ßos</td>
                        <td><code>usuarioNaoAutenticado</code>, <code>erroServidor</code>, <code>naoConseguiProcessar</code></td>
                    </tr>
                    <tr>
                        <td><code>STRINGS.auth</code></td>
                        <td>Autentica√ß√£o ‚Äî login, cadastro, Google OAuth</td>
                        <td><code>entrar</code>, <code>criarConta</code>, <code>entrarComGoogle</code></td>
                    </tr>
                    <tr>
                        <td><code>STRINGS.nav</code></td>
                        <td>R√≥tulos de navega√ß√£o e sidebar</td>
                        <td><code>dashboard</code>, <code>questionario</code>, <code>configuracoes</code></td>
                    </tr>
                    <tr>
                        <td><code>STRINGS.dashboard</code></td>
                        <td>T√≠tulos e mensagens de erro dos widgets</td>
                        <td><code>acoesRapidas</code>, <code>noticiasFinanceiras</code>, <code>naoFoiPossivelCarregarDados</code></td>
                    </tr>
                    <tr>
                        <td><code>STRINGS.chat</code></td>
                        <td>Interface do chat ‚Äî modais, se√ß√µes, mensagens de boas-vindas</td>
                        <td><code>diasAtras(n)</code>, <code>boasVindasComPerfil(nome)</code>, <code>limparTudoConfirm</code></td>
                    </tr>
                    <tr>
                        <td><code>STRINGS.perfil</code></td>
                        <td>Question√°rio e perfil de investidor</td>
                        <td><code>analiseCategoria</code>, <code>alocacaoRecomendada</code>, <code>toleranciaRisco</code></td>
                    </tr>
                    <tr>
                        <td><code>STRINGS.carteira</code></td>
                        <td>Portf√≥lio e modal de ativos</td>
                        <td><code>precoMedio</code>, <code>tickerObrigatorio</code>, <code>logistica</code></td>
                    </tr>
                    <tr>
                        <td><code>STRINGS.ui</code></td>
                        <td>Elementos gen√©ricos de interface</td>
                        <td><code>cancelar</code>, <code>salvar</code>, <code>carregando</code></td>
                    </tr>
                </tbody>
            </table>

            <h3>Fun√ß√µes din√¢micas</h3>
            <p>Strings que cont√™m valores vari√°veis s√£o definidas como fun√ß√µes tipadas:</p>
            <pre><span class="comment">// Em strings.ts</span>
<span class="keyword">chat</span>: {
  diasAtras: (n: <span class="type">number</span>) =&gt; <span class="string">`${n} dias atr√°s`</span>,
  semanasAtras: (n: <span class="type">number</span>) =&gt; <span class="string">`${n} semana${n > 1 ? 's' : ''} atr√°s`</span>,
  boasVindasComPerfil: (nome: <span class="type">string</span>) =&gt;
    <span class="string">`Ol√°! Sou o assistente virtual da Nuvary Invest. Vi que seu perfil √© **${nome}**...`</span>,
  contextoUsuario: (nome, tipo, pontuacao, rf, rv, fii, intl) =&gt;
    <span class="string">`[Contexto: O usu√°rio tem perfil ${nome} (${tipo}), com pontua√ß√£o ${pontuacao}...]`</span>,
}</pre>
        </section>

        <!-- Como usar -->
        <section id="uso">
            <h2>üöÄ Como Usar</h2>

            <p>Para qualquer novo texto de UI, em vez de escrever a string diretamente no componente:</p>

            <h3>‚ùå Antes (n√£o usar)</h3>
            <pre><span class="comment">// Diretamente no componente ‚Äî propenso a erros de acento</span>
&lt;h3&gt;Analise por Categoria&lt;/h3&gt;
&lt;p&gt;Nao foi possivel carregar dados.&lt;/p&gt;
<span class="keyword">throw new</span> Error(<span class="string">'Usuario nao autenticado'</span>)</pre>

            <h3>‚úÖ Depois (padr√£o v3.3.0)</h3>
            <pre><span class="comment">// 1. Adicione a string em strings.ts (uma √∫nica vez, com acento correto)</span>
<span class="keyword">export const</span> STRINGS = {
  perfil: {
    analiseCategoria: <span class="string">'An√°lise por Categoria'</span>,
  },
  errors: {
    naoFoiPossivelCarregar: <span class="string">'N√£o foi poss√≠vel carregar dados.'</span>,
    usuarioNaoAutenticado: <span class="string">'Usu√°rio n√£o autenticado'</span>,
  }
} <span class="keyword">as const</span>;

<span class="comment">// 2. Importe e use no componente</span>
<span class="keyword">import</span> { STRINGS } <span class="keyword">from</span> <span class="string">'@/constants/strings'</span>;

&lt;h3&gt;{STRINGS.perfil.analiseCategoria}&lt;/h3&gt;
&lt;p&gt;{STRINGS.errors.naoFoiPossivelCarregar}&lt;/p&gt;
<span class="keyword">throw new</span> Error(STRINGS.errors.usuarioNaoAutenticado)</pre>

            <div class="success-box">
                <strong>Vantagem principal:</strong> se precisar alterar um texto (ex: "An√°lise" ‚Üí "An√°lise Detalhada"), muda em um √∫nico lugar em <code>strings.ts</code> e todos os componentes s√£o atualizados automaticamente. Nenhuma busca manual nos arquivos necess√°ria.
            </div>
        </section>

        <!-- Arquivos refatorados -->
        <section id="refatorados">
            <h2>üîß Componentes Refatorados (14 arquivos)</h2>

            <p>Na v3.3.0, todos os componentes principais foram migrados para usar <code>STRINGS</code>:</p>

            <div class="files-grid">
                <div class="file-card">
                    <div class="file-name">components/chat/Chatbot.tsx <span class="domain-tag">chat</span></div>
                    <div class="file-desc">Boas-vindas, contexto do perfil, disclaimer de IA, op√ß√µes r√°pidas</div>
                </div>
                <div class="file-card">
                    <div class="file-name">components/chat/ChatSidebar.tsx <span class="domain-tag">chat</span></div>
                    <div class="file-desc">Se√ß√µes de hist√≥rico, formata√ß√£o de datas relativas, modais de exclus√£o</div>
                </div>
                <div class="file-card">
                    <div class="file-name">components/dashboard/StockList.tsx <span class="domain-tag">dashboard</span></div>
                    <div class="file-desc">T√≠tulo "A√ß√µes Populares" e mensagem de erro</div>
                </div>
                <div class="file-card">
                    <div class="file-name">components/dashboard/NewsWidget.tsx <span class="domain-tag">dashboard</span></div>
                    <div class="file-desc">T√≠tulo "Not√≠cias Financeiras" e mensagem de erro</div>
                </div>
                <div class="file-card">
                    <div class="file-name">components/dashboard/MarketOverview.tsx <span class="domain-tag">dashboard</span></div>
                    <div class="file-desc">Mensagem de erro do mercado</div>
                </div>
                <div class="file-card">
                    <div class="file-name">components/dashboard/QuickActionsPanel.tsx <span class="domain-tag">dashboard</span></div>
                    <div class="file-desc">T√≠tulo "A√ß√µes R√°pidas" e r√≥tulo do question√°rio</div>
                </div>
                <div class="file-card">
                    <div class="file-name">components/dashboard/AISuggestionsCard.tsx <span class="domain-tag">dashboard</span></div>
                    <div class="file-desc">"Sugest√µes da IA" e disclaimer de recomenda√ß√£o</div>
                </div>
                <div class="file-card">
                    <div class="file-name">components/dashboard/InvestorProfileCard.tsx <span class="domain-tag">perfil</span></div>
                    <div class="file-desc">Labels de aloca√ß√£o, "Aloca√ß√£o Recomendada", CTA do question√°rio</div>
                </div>
                <div class="file-card">
                    <div class="file-name">components/questionnaire/ResultCard.tsx <span class="domain-tag">perfil</span></div>
                    <div class="file-desc">R√≥tulos da aloca√ß√£o, an√°lise por categoria, bot√£o refazer</div>
                </div>
                <div class="file-card">
                    <div class="file-name">components/questionnaire/Questionnaire.tsx <span class="domain-tag">perfil</span></div>
                    <div class="file-desc">Mensagens de erro, t√≠tulo e bot√£o de in√≠cio</div>
                </div>
                <div class="file-card">
                    <div class="file-name">components/portfolio/AddAssetModal.tsx <span class="domain-tag">carteira</span></div>
                    <div class="file-desc">Labels de formul√°rio e mensagens de valida√ß√£o</div>
                </div>
                <div class="file-card">
                    <div class="file-name">components/layout/Header.tsx <span class="domain-tag">nav</span></div>
                    <div class="file-desc">R√≥tulo "Question√°rio" na navega√ß√£o</div>
                </div>
                <div class="file-card">
                    <div class="file-name">components/layout/DashboardLayout.tsx <span class="domain-tag">nav</span></div>
                    <div class="file-desc">"Usu√°rio" e "Configura√ß√µes" na sidebar</div>
                </div>
                <div class="file-card">
                    <div class="file-name">services/chatService.ts <span class="domain-tag">errors</span></div>
                    <div class="file-desc"><code>throw new Error(STRINGS.errors.usuarioNaoAutenticado)</code> em 3 fun√ß√µes</div>
                </div>
                <div class="file-card">
                    <div class="file-name">services/perfilService.ts <span class="domain-tag">errors</span></div>
                    <div class="file-desc"><code>throw new Error(STRINGS.errors.usuarioNaoAutenticado)</code> em 2 fun√ß√µes</div>
                </div>
            </div>

            <h3>Verifica√ß√£o TypeScript</h3>
            <p>Ap√≥s a refatora√ß√£o, o compilador TypeScript confirma zero erros de tipo:</p>
            <pre><span class="comment">$ npx tsc --noEmit</span>
<span class="comment"># (sem sa√≠da = zero erros)</span></pre>
        </section>
    </main>

    <footer>
        <p>Nuvary Invest ‚Äî Documenta√ß√£o T√©cnica v3.3.0 | Fevereiro 2026</p>
        <p><a href="index.html">Voltar para o √≠ndice</a></p>
    </footer>
</body>
</html>
